//
// Copyright (c) 2011, Project-Haystack
// Licensed under the Academic Free License version 3.0
//
// History:
//   22 Feb 2011  Brian Frank  Creation
//   24 Apr 2019  Brian Frank  New design
//

--------------------------------------------------------------------------
def: ^motor
is: [^equip, ^elec-input]
wikipedia: `https://en.wikipedia.org/wiki/Electric_motor`
doc: "Equipment that converts electrical energy into mechanical energy"
children: [
  // Primary on/off command (on is true, off is false)
  {run cmd point},

  // Secondary on/off command (enabled is true, disabled is false)
  {enable cmd point},

  // Run status sensor.  True indicates on and false off.
  {run sensor point},

  // Enable status sensor.  True indicates enabled and false disabled.
  {enable cmd sensor point},
  ]
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// VFD
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vfd
is: ^motor
tagOn: ^motor
wikipedia: `https://en.wikipedia.org/wiki/Variable-frequency_drive`
doc: "Motor with variable frequency drive."
children: [
  // Speed command as percentage where 0% is off, 100% if full speed
  {drive speed cmd point},

  // Speed command as a frequency in Hz
  {drive freq cmd point},

  // Speed status as percentage where 0% is off, 100% if full speed
  {drive speed sensor point},

  // Speed status as frequency in Hz
  {drive freq sensor point},
  ]
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// VFD Points
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^drive
is: ^phenomenon
doc: "Related to the drive control of a `motor`"
--------------------------------------------------------------------------
def: ^drive-speed
is: ^quantity
quantityOf: ^drive
prefUnit: ["%"]
doc:
  Motor speed measured in "%"; 0% is off and 100% is the fastest speed.
--------------------------------------------------------------------------
def: ^drive-freq
is: ^quantity
quantityOf: ^drive
prefUnit: ["Hz"]
doc:
  Motor frequency measured in "Hz".
--------------------------------------------------------------------------


//////////////////////////////////////////////////////////////////////////
// Fan
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^fan
is: ^marker
wikipedia: `https://en.wikipedia.org/wiki/Fan_(machine)`
doc: "Fan equipment or control point"
--------------------------------------------------------------------------
def: ^fan-motor
is: ^motor
moves: ^air
wikipedia: `https://en.wikipedia.org/wiki/Fan_(machine)`
ductSection: ^ductSectionType
childrenFlatten: [^ductSectionType, ^fan]
doc: "Motor used with a fan to create air flow."
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// Pump
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^pump
is: ^marker
wikipedia: `https://en.wikipedia.org/wiki/Pump`
doc: "Pump equipment or control point"
--------------------------------------------------------------------------
def: ^pump-motor
is: ^motor
moves: ^fluid
pipeSection: ^pipeSectionType
wikipedia: `https://en.wikipedia.org/wiki/Pump`
childrenFlatten: [^fluid, ^pipeSectionType, ^pump]
doc: "Motor used with a pump to move fluid."
--------------------------------------------------------------------------

