//
// Copyright (c) 2021, Project-Haystack
// Licensed under the Academic Free License version 3.0
//
// History:
//   12 Nov 2021  Brian Frank  Creation
//

//////////////////////////////////////////////////////////////////////////
// System
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vrf
is: ^marker
wikipedia: `https://en.wikipedia.org/wiki/Variable_refrigerant_flow`
doc: "Variable refigerant flow"
--------------------------------------------------------------------------
def: ^vrf-system
is: ^system
doc:
  Variable refigerant flow system.  The system contains the indoor
  units, outdoor units, and branch selectors.
children: [
  {vrf refrig plant equip},
  {vrf indoorUnit equip},
  {vrf outdoorUnit equip},
  ]
--------------------------------------------------------------------------
def: ^vrf-coolingOnly-system
is: ^vrf-system
doc: "Cooling only VRF system can only cool; heating is not available"
--------------------------------------------------------------------------
def: ^vrf-heatPump-system
is: ^vrf-system
doc:
  Heat pump VRF system can either heat, or cool, but not at the same time.
  TODO: using heatPump here will not work, but I've left this based on
  if we make the term heatPump more generic....
--------------------------------------------------------------------------
def: ^vrf-heatRecovery-system
is: ^vrf-system
doc:
  Heat recovery VRF system can operate cooling and heating by each indoor unit
  independently, at the same time. Heat recovery VRF systems have branch selectors
  to control how much, and which (hot gas or subcooled liquid) refrigerant
  goes to each indoor unit.
  NOTE: is this the only VRF system type with branch selectors?
children: [
  {vrf branchSelector equip},
  ]
--------------------------------------------------------------------------
def: ^vrf-equip
is: ^equip
doc: "Equipment used in VRF systems"
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// Refrigerant Plant
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vrf-refrig-plant
is: [^plant, ^refrig-output]
doc: "Group of outdoor units in a VRF system."
children: [
  {vrf outdoorUnit equip},
  ]
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// Outdoor Unit
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vrf-outdoorUnit
is: [^vrf-equip, ^refrig-output]
doc:
   Outdoor unit with one or more compressors in a VRF system. As each indoor
   unit sends a demand to the outdoor unit, outdoor unit delivers the amount
   of refrigerant needed to meet the individual requirements of each indoor
   unit.
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// Indoor Unit
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vrf-indoorUnit
is: [^vrf-equip, ^refrig-input]
doc:
  Indoor unit in a VRF system.  Indoor units operate to satisfy a heating
  or cooling load in a zone based on a zone thermostat temperature set point.
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// Branch Selector
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^branchSelector
is: [^vrf-equip, ^refrig-input]
doc:
  Branch selector used for heat recovery in a VRF system.  These are
  control devices directing the liquid refrigerant or gas refrigerant
  to zones requiring cooling or heating.
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// Misc (generic tags to formalize)
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^system
is: ^entity
docTaxonomy
mandatory
doc: "TODO: placeholder for system entities to be finalized in WG Labs"
--------------------------------------------------------------------------
def: ^heatRecovery
is: ^marker
doc: "TODO: need generic definition"
--------------------------------------------------------------------------
def: ^indoorUnit
is: ^marker
doc: "Associated with equipment inside the conditioned space"
--------------------------------------------------------------------------
def: ^outdoorUnit
is: ^marker
doc: "Associated with equipment outside the conditioned space"
--------------------------------------------------------------------------

